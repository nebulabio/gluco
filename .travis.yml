language: python
python:
  - "2.7"
sudo: required # needed to install Rust
cache:
  directories:
    - "~/.platformio"
before_install:
  # Download and install Rust and Cargo via `rustup`
  - curl -sSf https://static.rust-lang.org/rustup.sh | sh
env:
  - TEST_DIR=gluco
  - TEST_DIR=driver
install:
  - pip install -U platformio
script:
  - cd $TEST_DIR && make
notifications:
  email:
    on_success: change
    on_failure: change
  webhooks:
    urls:
      - https://webhooks.gitter.im/e/cd7faa822be9fe30467e
    on_success: change
    on_failure: always
    on_start: never
